FROM registry.suse.com/bci/bci-base:15.5
RUN zypper install -y sqlite3
RUN mkdir /data
RUN mkdir /data/images
RUN mkdir /data/dbase
RUN mkdir /initdata
RUN mkdir /initdata/images
RUN mkdir /initdata/dbase
WORKDIR /initdata
RUN mkdir dbase
COPY setup_db.sql /initdata/dbase/
COPY load_images.sh /initdata/dbase/
COPY images /initdata/images
RUN sqlite3 /initdata/dbase/images.db < /initdata/dbase/setup_db.sql
RUN chmod +x /initdata/dbase/load_images.sh
CMD tail -f /dev/null
